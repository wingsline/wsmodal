/*!
 * jquery.wsmodal.js v0.1.1
 * http://wingsline.com
 *
 * Copyright 2013 Arpad Olasz
 * All rights reserved.
 *
 */(function(e){var t="wsmodal",n={bg:"wsmodal__bg",close:"wsmodal__close",opacity:.7,speed:200,open:function(){e(".text-input,.btn",this).first().focus()}},r=[],i={init:function(r){return this.each(function(){var s=e(this),o=s.data(t);if(!o){o=e.extend({global:{},open:n.open,close:function(){}},r);e(this).data(t,o);n=e.extend(o.global,n);var u=e("."+n.bg);u.length===0&&(u=e('<div class="'+n.bg+'"/>').css("opacity",n.opacity).appendTo("body").on("click."+t,function(){i.close.apply(u,[1])}));e(this).on("click."+t,function(e){e.preventDefault();i.open.apply(this)});o.container=e("#"+s.data("wsmodalId"));o.container.data(t+"Open",o.open);o.container.data(t+"Close",o.close);e("body").append(o.container.detach());e("body").off("."+t,"."+n.close).on("click."+t,"."+n.close,function(e){e.preventDefault();i.close.apply(u)});e("body").off("keyup."+t).on("keyup."+t,function(e){if(e.which===27){e.preventDefault();i.close.apply(u)}})}})},destroy:function(){return this.each(function(){var n=e(this),r=n.data(t);e(window).unbind("."+t);r[t].remove();n.removeData(t)})},open:function(){return e(this).each(function(){var i=e(this),s=i.data(t),o=parseInt(s.container.css("top"),10);undefined===s.container.data(t)&&s.container.data(t,o);e("."+n.bg).fadeIn(n.speed/2);s.container.css({top:-s.container.outerHeight(),opacity:0,visibility:"visible"}).animate({top:o,opacity:1},n.speed,function(){s.container.data(t+"Open").apply(s.container)});r.push(s.container);var u=e("."+n.bg);u.prevAll().on("keyup."+t,function(e){e.preventDefault();n.open.apply(s.container)})})},close:function(t){if(t){jQuery.each(r,s);r=[]}else if(!t&&r.length){var i=r.pop();i.animate({top:-i.outerHeight(),opacity:0},n.speed/2,s)}r.length||e(this).fadeOut(n.speed/2)}},s=function(){var n=e(this);n.css({top:n.data(t),opacity:1,visibility:"hidden"});n.data(t+"Close").apply(n)};e.fn.wsmodal=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.wsmodal")}})(jQuery);$("a[data-wsmodal-id]").wsmodal();